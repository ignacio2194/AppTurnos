{"version":3,"sources":["app.js"],"names":["pagina","turno","nombre","fecha","hora","servicio","telefono","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreTurno","fechaTurno","desahabilitarfechasAnteriores","numTelefono","horaTurno","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicios","id","precio","nombreServicio","createElement","textContent","precioServicio","idServicio","servicioDiv","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagname","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","servicioObj","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","turnoFecha","servTurno","telTurno","innerHTML","serviciosTurno","contenedorServicio","textoServicio","nombreTexto","value","trim","length","mostrarAlerta","alerta","mensaje","tipo","alertaAnterior","setTimeout","fechaInput","evento","dia","Date","getUTCDay","inputFecha","fechaAhora","year","getFullYear","mes","getMonth","getDate","fechaDesahabilitar","min","tel","isNaN","horaCita","split"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\n\r\nconst turno = {\r\n  nombre: \"\",\r\n  fecha: \"\",\r\n  hora: \"\",\r\n  servicio: [],\r\n  telefono: \"\",\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  iniciarApp();\r\n});\r\nfunction iniciarApp() {\r\n  mostrarServicios();\r\n  //resalta el div actual segun el tab  al que se presiona\r\n  mostrarSeccion();\r\n\r\n  //Oculta o muestra una seccion segun el tab al que se presiona\r\n  cambiarSeccion();\r\n  //paginacion pagina siguiente y anterior\r\n  paginaSiguiente();\r\n  paginaAnterior();\r\n\r\n  //comprueba la pagina actual para mostrar o ocultar la pagina siguiente\r\n  botonesPaginador();\r\n\r\n  //muestra el resumen del turno o mensaje de error en caso de no pasar la validacion\r\n  mostrarResumen();\r\n  // guarda el nombre y los datos del turno\r\n  nombreTurno();\r\n  //almacena la cita de la fecha en el objeto\r\n  fechaTurno();\r\n  //desahabilita fechas pasadas\r\n  desahabilitarfechasAnteriores();\r\n  //almancena el numero de telefono del cliente\r\n  numTelefono();\r\n  //guarda la hora del turno\r\n  horaTurno();\r\n}\r\nfunction mostrarSeccion() {\r\n  //Elminar  mostrar-seccion de la seccion anterior\r\n  const seccionAnterior = document.querySelector(\".mostrar-seccion\");\r\n  if (seccionAnterior) {\r\n    seccionAnterior.classList.remove(\"mostrar-seccion\");\r\n  }\r\n  const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n  seccionActual.classList.add(\"mostrar-seccion\");\r\n  //resalta la seccion actual\r\n  const tabAnterior = document.querySelector(\".tabs .actual\");\r\n  if (tabAnterior) {\r\n    tabAnterior.classList.remove(\"actual\");\r\n    //llamar la funcion de mostrar seccion\r\n    mostrarSeccion();\r\n  }\r\n\r\n  //agrega mostrar seccion donde dimos click\r\n\r\n  const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n  tab.classList.add(\"actual\");\r\n}\r\n\r\nfunction cambiarSeccion() {\r\n  const enlaces = document.querySelectorAll(\".tabs button\");\r\n  enlaces.forEach((enlace) => {\r\n    enlace.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      pagina = parseInt(e.target.dataset.paso);\r\n      mostrarSeccion();\r\n      botonesPaginador();\r\n    });\r\n  });\r\n}\r\nasync function mostrarServicios() {\r\n  try {\r\n    const resultado = await fetch(\"./servicios.json\");\r\n    const db = await resultado.json();\r\n    const { servicios } = db;\r\n    //generar HTML\r\n    servicios.forEach((servicio) => {\r\n      const { id, nombre, precio } = servicio;\r\n      //DOM scripting\r\n      //generar nombre del servicio\r\n      const nombreServicio = document.createElement(\"P\");\r\n      nombreServicio.textContent = nombre;\r\n      nombreServicio.classList.add(\"nombre-servicio\");\r\n\r\n      //generar precio del servicio\r\n      const precioServicio = document.createElement(\"P\");\r\n      precioServicio.textContent = `$ ${precio}`;\r\n      precioServicio.classList.add(\"precio-servicio\");\r\n\r\n      const idServicio = document.createElement(\"p\");\r\n      idServicio.textContent = id;\r\n      idServicio.classList.add(\"idServicio\");\r\n\r\n      //generar el div del servicio\r\n      const servicioDiv = document.createElement(\"div\");\r\n      servicioDiv.classList.add(\"servicioDiv\");\r\n      servicioDiv.dataset.idServicio = id;\r\n      //Se marca cuando pickeas un servicio\r\n      servicioDiv.onclick = seleccionarServicio;\r\n\r\n      //inyectar precio y nombre al div del servicio\r\n      servicioDiv.appendChild(nombreServicio);\r\n      servicioDiv.appendChild(precioServicio);\r\n      //volcandolo en el HTML\r\n      document.querySelector(\"#servicios\").appendChild(servicioDiv);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nfunction seleccionarServicio(e) {\r\n  let elemento;\r\n  if (e.target.tagname === \"P\") {\r\n    elemento = e.target.parentElement;\r\n  } else {\r\n    elemento = e.target;\r\n  }\r\n  if (elemento.classList.contains(\"seleccionado\")) {\r\n    elemento.classList.remove(\"seleccionado\");\r\n    const id = parseInt(elemento.dataset.idServicio);\r\n\r\n    eliminarServicio(id);\r\n  } else {\r\n    elemento.classList.add(\"seleccionado\");\r\n    const servicioObj = {\r\n      id: parseInt(elemento.dataset.idServicio),\r\n      nombre: elemento.firstElementChild.textContent,\r\n      precio: elemento.firstElementChild.nextElementSibling.textContent,\r\n    };\r\n    //console.log(servicioObj);\r\n    agregarServicio(servicioObj);\r\n  }\r\n}\r\nfunction eliminarServicio(id) {\r\n  const { servicio } = turno;\r\n  turno.servicio = servicio.filter((servicio) => servicio.id !== id);\r\n}\r\nfunction agregarServicio(servicioObj) {\r\n  const { servicio } = turno;\r\n  turno.servicio = [...servicio, servicioObj];\r\n  \r\n}\r\n\r\nfunction paginaSiguiente() {\r\n  const paginaSiguiente = document.querySelector(\"#siguiente\");\r\n  paginaSiguiente.addEventListener(\"click\", () => {\r\n    pagina++;\r\n    console.log(pagina);\r\n    botonesPaginador();\r\n  });\r\n}\r\nfunction paginaAnterior() {\r\n  const paginaAnterior = document.querySelector(\"#anterior\");\r\n  paginaAnterior.addEventListener(\"click\", () => {\r\n    pagina--;\r\n    console.log(pagina);\r\n    botonesPaginador();\r\n  });\r\n}\r\nfunction botonesPaginador() {\r\n  const paginaSiguiente = document.querySelector(\"#siguiente\");\r\n  const paginaAnterior = document.querySelector(\"#anterior\");\r\n  if (pagina === 1) {\r\n    paginaAnterior.classList.add(\"ocultar\");\r\n  } else if (pagina === 3) {\r\n    paginaSiguiente.classList.add(\"ocultar\");\r\n    paginaAnterior.classList.remove(\"ocultar\");\r\n    mostrarResumen(); // si estamos en la pagina 3 carga el resumen\r\n  } else {\r\n    paginaAnterior.classList.remove(\"ocultar\");\r\n    paginaSiguiente.classList.remove(\"ocultar\");\r\n  }\r\n  mostrarSeccion();\r\n}\r\nfunction mostrarResumen() {\r\n  const { nombre, fecha, hora, servicio ,telefono } = turno;\r\n  const resumenDiv = document.querySelector(\".contenido-resumen\");\r\n  //limpia el html previo\r\n  while (resumenDiv.firstChild) {\r\n    resumenDiv.removeChild(resumenDiv.firstChild);\r\n  }\r\n\r\n  if (Object.values(turno).includes(\"\")) {\r\n    const noServicios = document.createElement(\"P\");\r\n    noServicios.textContent =\"Faltan datos de nombre ,fecha , hora o servicios\";\r\n    noServicios.classList.add(\"invalidar-cita\");\r\n    //resumenDIv\r\n    resumenDiv.appendChild(noServicios);\r\n    return;\r\n  }\r\n  //mostrar el resumen\r\n  const nombreTurno = document.createElement(\"P\");\r\n  const turnoFecha = document.createElement(\"P\");\r\n  const horaTurno = document.createElement(\"P\");\r\n  const servTurno = document.createElement(\"P\");\r\n  const telTurno = document.createElement(\"P\");\r\n\r\n  nombreTurno.innerHTML = `<span>Nombre:</span>${nombre}`;\r\n  turnoFecha.innerHTML = `<span>fecha:</span>${fecha}`;\r\n  servTurno.innerHTML = `<span>Servicio:</span>${servicio}`;\r\n  horaTurno.innerHTML = `<span>Hora:</span>${hora}`;\r\n  telTurno.innerHTML = `<span>Telefono:</span>${telefono}`;\r\n\r\n\r\n  const serviciosTurno = document.createElement('DIV');\r\n  serviciosTurno.classList.add('resumen-servicios')\r\n\r\n  resumenDiv.appendChild(nombreTurno);\r\n  resumenDiv.appendChild(turnoFecha);\r\n//iterar sobre cada servicio\r\nservicio.forEach(servicios=>{\r\n const  {nombre,precio} = servicios ;\r\nconst contenedorServicio =document.createElement('DIV') ; \r\ncontenedorServicio.classList.add('contenedor-servicio') ;\r\n\r\nconst textoServicio=document.createElement('P')\r\ntextoServicio.textContent=nombre;\r\n\r\nconst precioServicio=document.createElement('P')\r\ntextoServicio.textContent=precio;\r\n\r\n\r\n// colocar texto y precio en el div\r\ncontenedorServicio.appendChild(textoServicio);\r\ncontenedorServicio.appendChild(precioServicio)\r\n;\r\nserviciosTurno.appendChild(contenedorServicio);\r\n\r\n})\r\nresumenDiv.appendChild(nombreTurno);\r\nresumenDiv.appendChild(turnoFecha);\r\nresumenDiv.appendChild(horaTurno);\r\nresumenDiv.appendChild(serviciosTurno);\r\n\r\n}\r\nfunction nombreTurno() {\r\n  const nombreInput = document.querySelector(\"#nombre\");\r\n  nombreInput.addEventListener(\"input\", (e) => {\r\n    let nombreTexto = e.target.value.trim();\r\n    if (nombreTexto === \"\" || nombreTexto.length < 2) {\r\n      mostrarAlerta(\"Nombre no valido\", \"error\");\r\n    } else {\r\n      const alerta = document.querySelector(\".alerta\");\r\n      if (alerta) {\r\n        alerta.remove();\r\n      }\r\n      turno.nombre = nombreTexto;\r\n    }\r\n  });\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo) {\r\n  const alerta = document.createElement(\"DIV\");\r\n  const alertaAnterior = document.querySelector(\".alerta\");\r\n  alerta.textContent = mensaje;\r\n  alerta.classList.add(\"alerta\");\r\n  //si ya hay una alerta entonces que no se sigan acumulando\r\n  if (alertaAnterior) {\r\n    return;\r\n  }\r\n  if (tipo === \"error\") {\r\n    alerta.classList.add(\"error\");\r\n  }\r\n  const formulario = document.querySelector(\".formulario\");\r\n  formulario.appendChild(alerta);\r\n  //eliminar alerta despues de cierto tiempo\r\n  setTimeout(() => {\r\n    alerta.remove();\r\n  }, 3000);\r\n}\r\nfunction fechaTurno() {\r\n  const fechaInput = document.querySelector(\"#fecha\");\r\n  fecha.addEventListener(\"input\", (evento) => {\r\n    const dia = new Date(evento.target.value).getUTCDay();\r\n    if ([0].includes(dia)) {\r\n      evento.preventDefault();\r\n      fechaInput.value = \"\";\r\n      mostrarAlerta(\"Domingo no es un dia valido\", \"error\");\r\n    } else {\r\n      turno.fecha = fechaInput.value;\r\n      console.log(turno);\r\n    }\r\n  });\r\n}\r\nfunction desahabilitarfechasAnteriores() {\r\n  const inputFecha = document.querySelector(\"#fecha\");\r\n\r\n  const fechaAhora = new Date();\r\n  const year = fechaAhora.getFullYear();\r\n  const mes = fechaAhora.getMonth() + 1;\r\n  const dia = fechaAhora.getDate() + 1;\r\n  //formato desado DD/MM/AAAA\r\n\r\n  const fechaDesahabilitar = `${year}-${mes < 10 ? `0${mes}` : mes}-${\r\n    dia < 10 ? `0${dia}` : dia\r\n  }`;\r\n  inputFecha.min = fechaDesahabilitar;\r\n}\r\nfunction numTelefono() {\r\n  const nombreInput = document.querySelector(\"#telefono\");\r\n  nombreInput.addEventListener(\"input\", (e) => {\r\n    let tel = parseInt(e.target.value);\r\n    if (isNaN(tel == true)) {\r\n      mostrarAlerta(\"Numero no valido\");\r\n    } else {\r\n      turno.telefono = tel;\r\n    }\r\n  });\r\n}\r\nfunction horaTurno() {\r\n  const horaInput = document.querySelector(\"#hora\");\r\n  horaInput.addEventListener(\"input\", (e) => {\r\n    const horaCita = e.target.value;\r\n    const hora = horaCita.split(\":\");\r\n    if (hora[0] < 8 || hora[0] > 18) {\r\n      mostrarAlerta(\"Hora no valida , por favor elija otra\", \"error\");\r\n    } else {\r\n      turno.hora = horaCita;\r\n    }\r\n  });\r\n}\r\n"]}